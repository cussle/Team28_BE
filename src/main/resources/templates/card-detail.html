<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[[${card.name}]]ë‹˜ì˜ ëª…í•¨</title>

    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/card/home-nav-bar.css}">
    <link rel="stylesheet" th:href="@{/css/card/card-detail.css}">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script th:src="@{/js/script.js}"></script>

    <!-- ì¹´ì¹´ì˜¤ JavaScript SDK ë¡œë“œ -->
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        Kakao.cleanup();
        Kakao.init(/*[[${kakaoJavascriptKey}]]*/ '' );
        /*]]>*/
    </script>
</head>
<body>

<!-- Header with smaller margin and padding -->
<div class="header">
    <h2 class="title">ëª…í•¨</h2>
</div>

<!-- Main container holding the card -->
<div class="container">
    <button th:if="!${isMyCard}" id="add-to-group-btn" class="add-to-group-button">ê·¸ë£¹ì— ì¶”ê°€</button>

    <div id="modal-overlay" style="display: none;"></div>

    <div id="group-modal">
        <h3>ê·¸ë£¹ ì„ íƒ</h3>
        <ul id="group-list">
            <li th:each="group : ${groups}">
                <button class="group-option" th:attr="data-group-id=${group.id}">[[${group.name}]]</button>
            </li>
        </ul>
    </div>
    <div class="card">
        <!-- Business card title -->
        <h2>[[${card.name}]]</h2>

        <!-- Card details -->
        <p>íšŒì‚¬: [[${card.company}]]</p>
        <p>ì§ì±…: [[${card.position}]]</p>
        <p>ğŸ“± ì „í™”ë²ˆí˜¸: [[${card.phone}]]</p>
        <p>ğŸ“§ ì´ë©”ì¼: [[${card.email}]]</p>

        <p>ğŸ’» GitHub:
            <a th:href="'https://github.com/' + ${card.githubId}" target="_blank" class="github-link">[[${card.githubId}]]</a>
        </p>
        <!-- Card introduction -->
        <p>ì†Œê°œ: [[${card.bio}]]</p>
    </div>

    <div class="share-options" id="share-options" style="display: none;">
        <button id="kakao-share-btn" class="share-button-icon">
            <img th:src="@{/images/kakaotalk-icon.svg}" alt="KakaoTalk Icon" class="icon">
            ì¹´ì¹´ì˜¤í†¡
        </button>
        <button id="qr-share-btn" class="share-button-icon" th:attr="data-card-id=${card.id}">
            <img th:src="@{/images/qr-icon.svg}" alt="QR Code Icon" class="icon">
            QR
        </button>
        <button id="nfc-share-btn" class="share-button-icon" th:attr="data-card-id=${card.id}">
            <img th:src="@{/images/nfc-icon.svg}" alt="NFC Icon" class="icon">
            NFC
        </button>
    </div>
</div>

<!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<div th:replace="home-nav-bar :: navBar"></div>

<!-- Toast ì•Œë¦¼ -->
<div id="toast" class="toast"></div>

<!-- í† ê¸€ share ë²„íŠ¼ ëˆ„ë¥¸ ê²½ìš° ì¹´ì¹´ì˜¤í†¡, nfc, qr ê³µìœ  ë²„íŠ¼ í™œì„±í™” -->
<script>
    function toggleShareOptions() {
        const shareOptions = document.getElementById("share-options");
        if (shareOptions.style.display === "none") {
            shareOptions.style.display = "flex";
        } else {
            shareOptions.style.display = "none";
        }
    }
</script>
<script th:src="@{/js/card/card-share.js}"></script>
<script th:src="@{/js/wallet/wallet-add.js}"></script>

</body>
</html>
