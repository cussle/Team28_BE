<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[[${card.name}]] ëª…í•¨</title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_back_ios,send" />
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/card/card.css}">
    <link rel="stylesheet" th:href="@{/css/home.css}">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script th:src="@{/js/script.js}"></script>

    <style>
        .button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            background-color: grey; /* Green */
            color: white;
        }
        .button:hover {
            background-color: #16a085; /* Darker green */
        }
    </style>
</head>
<body>

<div class="card-title-container">
    <h2 class="title">[[${card.name}]] ëª…í•¨</h2>
    <!-- ëª…í•¨ Card-->
    <div th:replace="card :: cardSection(${card?.id ?: 1})"></div>
    <div>
        <button class="edit-button button">ëª…í•¨ ì¶”ê°€í•˜ê¸°</button>
    </div>
</div>



<!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<div th:replace="nav-bar :: navBar"></div>

<!-- Toast ì•Œë¦¼ -->
<div id="toast" class="toast"></div>

</body>

<script>
    function populateCardSection(data, container) {
        if (data) {
            const githubUsername = data.name || data.nickname;
            const githubLink = githubUsername ? `https://github.com/${githubUsername}` : '#';

            // ì¹´ë“œ ìš”ì†Œ ìƒì„±
            const cardElement = document.createElement("div");
            cardElement.classList.add("card");
            cardElement.id = `card-${data.id}`;

            cardElement.innerHTML = `
            <div class="card-image">
                <img src="${data.profileImg}" alt="Person profile">
            </div>
            <div class="card-content">
                <h3>${data.nickname || data.name}</h3>
                ${data.company ? `<p>ğŸ¢ Company: ${data.company}</p>` : ''}
                ${data.position ? `<p>ğŸ“Œ Position: ${data.position}</p>` : ''}
                ${data.phone ? `<p>ğŸ“ Phone: ${data.phone}</p>` : ''}
                <p>ğŸ’» GitHub:
                    <a href="${githubLink}" target="_blank">
                        ${githubUsername || 'GitHub Profile'}
                    </a>
                </p>
                ${data.email ? `<p>ğŸ“§ Email: ${data.email}</p>` : ''}
                ${data.linkedin ? `<p>ğŸ”— LinkedIn <a href="${data.linkedin}" target="_blank">${data.linkedin}</a></p>` : ''}
                ${data.notion ? `<p>ğŸ“š Notion <a href="${data.notion}" target="_blank">${data.notion}</a></p>` : ''}
                ${data.certification ? `<p>ğŸ“œ Certification: ${data.certification}</p>` : ''}
                ${data.extra ? `<p>ğŸ“ Extra: ${data.extra}</p>` : ''}
                ${data.bio ? `<p>ğŸ“ Bio: ${data.bio}</p>` : ''}
                ${data.techStack ? `<p>âœ… Tech Stack Included</p>` : ''}
                ${data.repository ? `<p>âœ… Repository Included</p>` : ''}
                ${data.contributions ? `<p>âœ… Contributions Included</p>` : ''}
            </div>
        `;
            // ì»¨í…Œì´ë„ˆì— ì¹´ë“œ ìš”ì†Œ ì¶”ê°€
            container.appendChild(cardElement);
        } else {
            container.innerHTML = `<p>Card data not available.</p>`;
        }
    }

    // ê°œë³„ ì¹´ë“œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ (ì´ í•¨ìˆ˜ëŠ” ê°œë³„ ì¹´ë“œ í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤)
    document.addEventListener("DOMContentLoaded", function () {
        const cardSection = document.getElementById("cardSection");
        if (cardSection) {
            const cardId = cardSection.getAttribute("data-card-id") || 1;
            fetchCardData(cardId, cardSection);
        }
    });

    function fetchCardData(cardId, container) {
        fetch(`/cards/${cardId}`)
            .then(response => response.json())
            .then(data => populateCardSection(data, container))
            .catch(error => console.error('Error fetching card data:', error));
    }
</script>
</html>
